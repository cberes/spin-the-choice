!function(e){"use strict";function n(){var n=[];this.register=function(e,n){this.registerCustom(e,function(e){e.textContent=n()})},this.registerCustom=function(t,i){n.push({element:e.getElementById(t),handler:i})},this.update=function(){var e;for(e=0;e<n.length;e+=1)n[e].handler(n[e].element)}}function t(){var e=null,n=0,t=0,i=0,o=0,r=0,s=[];this.getChoice=function(){return e},this.setChoice=function(n){e=n},this.getChoicesMade=function(){return n},this.redeemChoice=function(){n+=1,t-=1},this.getChoicesRemaining=function(){return t},this.addChoice=function(e){t+=e||1},this.getSpinsMade=function(){return i},this.redeemSpin=function(){i+=1,o-=1},this.getSpinsRemaining=function(){return o},this.addSpin=function(e){o+=e||1},this.getPoints=function(){return r},this.addPoints=function(e){r+=e},this.getPrizes=function(){return s},this.addPrize=function(e){s.push(e)}}function i(e,n,t){this.getId=function(){return e},this.getName=function(){return n},this.update=function(e){t(e)}}function o(e,n,t){this.getId=function(){return e},this.getName=function(){return n},this.getPoints=function(){return t}}function r(e,n,t,i){this.getId=function(){return e},this.getName=function(){return n},this.getPoints=function(){return t},this.update=i||function(i){i.addPrize(new o(e,n,t))}}function s(e){var n=e||0;this.getPoints=function(){return n},this.addPoints=function(e){n+=e},this.reset=function(){n=0}}function c(e,n,t,i){this.choose=function(){i.redeemChoice()},this.spin=function(){i.redeemSpin()}}function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(n,t){var i=e.createElement(n);return i.textContent=t,i}function d(e,n){return function(t){var i=t.getChoice()===e?1:-1;t.addPoints(i*n)}}function h(){var e=new s(0),o=new Audio("assets/sound/bell.ogg"),h=new n,g=new t,p=[new i("spin","Spin",d(f.SPIN,100)),new i("choice","Choice",d(f.CHOICE,100)),new i("lose_spin","Lose a Spin",function(e){e.addSpin(-1)}),new i("spin_again","Spin Again",function(e){e.addSpin()}),new i("prize","Prize Winner",function(e){o.play()}),new i("free_spin","Free Spin",function(e){e.addSpin()}),new i("lose_choice","Lose a Choice",function(e){e.addChoice(-1)}),new i("free_choice","Free Choice",function(e){e.addChoice()})],C=[new r("free_spin","Free Spin",0,function(e){e.addSpin()}),new r("winnebago","Winnebago",1e4),new r("free_choice","Free Choice",0,function(e){e.addChoice()}),new r("washer_dryer","Washer Dryer",1e3),new r("mazda","Mazda",5e3),new r("microwave","Microwave Oven",500),new r("points","Point Bank",0,function(n){n.addPoints(e.getPoints()),e.reset()}),new r("mercedes","Mercedes",7500)];new c(p,C,e,g);h.register("choices-made",g.getChoicesMade),h.register("choices-remaining",g.getChoicesRemaining),h.register("spins-made",g.getSpinsMade),h.register("spins-remaining",g.getSpinsRemaining),h.register("points-accrued",g.getPoints),h.register("points-bank",e.getPoints),h.registerCustom("prizes-earned",function(e){var n,t=g.getPrizes();for(u(e),n=0;n<t.length;n+=1)e.appendChild(a("li",t[n].getName()))}),h.update(),document.getElementById("choose").addEventListener("click",function(e){g.setChoice(f.CHOICE),e.preventDefault()}),document.getElementById("spin").addEventListener("click",function(e){g.setChoice(f.SPIN),e.preventDefault()}),document.getElementById("prize-wheel").addEventListener("click",function(e){o.play(),e.preventDefault()})}var f={CHOICE:"choice",SPIN:"spin",values:function(){return[this.CHOICE,this.SPIN]}};e.onreadystatechange=function(){"interactive"===e.readyState&&h()}}(document);