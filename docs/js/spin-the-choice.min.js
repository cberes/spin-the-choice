!function(e){"use strict";function n(e,n){var t,i;return void 0===n?(i=e,t=0):(i=n,t=e),Math.floor(Math.random()*i)+t}function t(){var n=[];this.register=function(e,n){this.registerCustom(e,function(e){e.textContent=n()})},this.registerCustom=function(t,i){n.push({element:e.getElementById(t),handler:i})},this.update=function(){var e;for(e=0;e<n.length;e+=1)n[e].handler(n[e].element)}}function i(){var e=null,n=0,t=0,i=0,o=0,r=0,s=[];this.getChoice=function(){return e},this.setChoice=function(n){e=n},this.getChoicesMade=function(){return n},this.redeemChoice=function(){n+=1,t-=1},this.getChoicesRemaining=function(){return t},this.addChoice=function(e){t+=e||1},this.getSpinsMade=function(){return i},this.redeemSpin=function(){i+=1,o-=1},this.getSpinsRemaining=function(){return o},this.addSpin=function(e){o+=e||1},this.getPoints=function(){return r},this.addPoints=function(e){r+=e},this.getPrizes=function(){return s},this.addPrize=function(e){s.push(e)}}function o(e,n,t){this.getId=function(){return e},this.getName=function(){return n},this.update=function(e){t(e)}}function r(e,n,t){this.getId=function(){return e},this.getName=function(){return n},this.getPoints=function(){return t}}function s(e,n,t,i){this.getId=function(){return e},this.getName=function(){return n},this.getPoints=function(){return t},this.update=i||function(i){i.addPrize(new r(e,n,t))}}function c(e){var n=e||0;this.getPoints=function(){return n},this.addPoints=function(e){n+=e},this.reset=function(){n=0}}function u(e){var t=null;this.getResult=function(){return t},this.spin=function(i){var o=n(e.length);t=e[o],i(t)}}function a(e,n,t,i){function o(){e.spin(function(e){e.update()})}this.choose=function(){i.setChoice(p.CHOICE),i.redeemChoice(),o()},this.spin=function(){i.setChoice(p.SPIN),i.redeemSpin(),o()}}function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function h(n,t){var i=e.createElement(n);return i.textContent=t,i}function f(e,n){return function(t){var i=t.getChoice()===e?1:-1;t.addPoints(i*n)}}function g(){var e=new c(0),n=new Audio("assets/sound/bell.ogg"),r=new t,g=new i,l=[new o("spin","Spin",f(p.SPIN,100)),new o("choice","Choice",f(p.CHOICE,100)),new o("lose_spin","Lose a Spin",function(e){e.addSpin(-1)}),new o("spin_again","Spin Again",function(e){e.addSpin()}),new o("prize","Prize Winner",function(e){n.play()}),new o("free_spin","Free Spin",function(e){e.addSpin()}),new o("lose_choice","Lose a Choice",function(e){e.addChoice(-1)}),new o("free_choice","Free Choice",function(e){e.addChoice()})],m=[new s("free_spin","Free Spin",0,function(e){e.addSpin()}),new s("winnebago","Winnebago",1e4),new s("free_choice","Free Choice",0,function(e){e.addChoice()}),new s("washer_dryer","Washer Dryer",1e3),new s("mazda","Mazda",5e3),new s("microwave","Microwave Oven",500),new s("points","Point Bank",0,function(n){n.addPoints(e.getPoints()),e.reset()}),new s("mercedes","Mercedes",7500)],C=new u(l),w=new u(m),v=new a(C,w,e,g);r.register("choices-made",g.getChoicesMade),r.register("choices-remaining",g.getChoicesRemaining),r.register("spins-made",g.getSpinsMade),r.register("spins-remaining",g.getSpinsRemaining),r.register("points-accrued",g.getPoints),r.register("points-bank",e.getPoints),r.register("wheel-outcome",C.getResult),r.register("prize-outcome",w.getResult),r.registerCustom("prizes-earned",function(e){var n,t=g.getPrizes();for(d(e),n=0;n<t.length;n+=1)e.appendChild(h("li",t[n].getName()))}),r.update(),document.getElementById("choose").addEventListener("click",function(e){v.choose(),r.update(),e.preventDefault()}),document.getElementById("spin").addEventListener("click",function(e){v.spin(),r.update(),e.preventDefault()}),document.getElementById("prize-wheel").addEventListener("click",function(e){n.play(),e.preventDefault()})}var p={CHOICE:"choice",SPIN:"spin",values:function(){return[this.CHOICE,this.SPIN]}};e.onreadystatechange=function(){"interactive"===e.readyState&&g()}}(document);